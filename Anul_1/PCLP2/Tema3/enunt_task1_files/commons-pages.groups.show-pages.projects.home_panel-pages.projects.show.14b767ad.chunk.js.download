(this.webpackJsonp=this.webpackJsonp||[]).push([[209],{"7Gq8":function(t,e,i){var o=i("BZxG");t.exports=function(t,e,i){for(var s=-1,n=t.criteria,a=e.criteria,l=n.length,r=i.length;++s<l;){var c=o(n[s],a[s]);if(c)return s>=r?c:c*("desc"==i[s]?-1:1)}return t.index-e.index}},"95R8":function(t,e,i){var o=i("90g9"),s=i("aEqC"),n=i("nHTl"),a=i("QwWC"),l=i("uHqx"),r=i("wJPF"),c=i("7Gq8"),d=i("uYOL"),u=i("P/Kr");t.exports=function(t,e,i){e=e.length?o(e,(function(t){return u(t)?function(e){return s(e,1===t.length?t[0]:t)}:t})):[d];var p=-1;e=o(e,r(n));var f=a(t,(function(t,i,s){return{criteria:o(e,(function(e){return e(t)})),index:++p,value:t}}));return l(f,(function(t,e){return c(t,e,i)}))}},BZxG:function(t,e,i){var o=i("G1mR");t.exports=function(t,e){if(t!==e){var i=void 0!==t,s=null===t,n=t==t,a=o(t),l=void 0!==e,r=null===e,c=e==e,d=o(e);if(!r&&!d&&!a&&t>e||a&&l&&c&&!r&&!d||s&&l&&c||!i&&c||!n)return 1;if(!s&&!a&&!d&&t<e||d&&i&&n&&!s&&!a||r&&i&&n||!l&&n||!c)return-1}return 0}},QwWC:function(t,e,i){var o=i("2v8U"),s=i("20jF");t.exports=function(t,e){var i=-1,n=s(t)?Array(t.length):[];return o(t,(function(t,o,s){n[++i]=e(t,o,s)})),n}},TKCn:function(t,e,i){var o=i("4ips"),s=i("95R8"),n=i("Opi0"),a=i("etTJ"),l=n((function(t,e){if(null==t)return[];var i=e.length;return i>1&&a(t,e[0],e[1])?e=[]:i>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),s(t,o(e,1),[])}));t.exports=l},UFYv:function(t,e,i){"use strict";i("3UXl"),i("iyoE");var o=i("crTv"),s=i("1fc5"),n=i("4lAS"),a=i("lHJB"),l=i("qPgm"),r=i("/lV4");const c={notificationTitles:{participating:Object(r.s__)("NotificationLevel|Participate"),mention:Object(r.s__)("NotificationLevel|On mention"),watch:Object(r.s__)("NotificationLevel|Watch"),global:Object(r.s__)("NotificationLevel|Global"),disabled:Object(r.s__)("NotificationLevel|Disabled"),custom:Object(r.s__)("NotificationLevel|Custom")},notificationTooltipTitle:Object(r.__)("Notification setting - %{notification_title}"),notificationDescriptions:{participating:Object(r.__)("You will only receive notifications for items you have participated in"),mention:Object(r.__)("You will receive notifications only for comments in which you were @mentioned"),watch:Object(r.__)("You will receive notifications for most activity"),disabled:Object(r.__)("You will not get any notifications via email"),global:Object(r.__)("Use your global notification setting"),custom:Object(r.__)("You will only receive notifications for items you have participated in and the events you choose"),owner_disabled:Object(r.__)("Notifications have been disabled by the project or group owner")},updateNotificationLevelErrorMessage:Object(r.__)("An error occurred while updating the notification settings. Please try again."),loadNotificationLevelErrorMessage:Object(r.__)("An error occurred while loading the notification settings. Please try again."),customNotificationsModal:{title:Object(r.__)("Custom notification events"),bodyTitle:Object(r.__)("Notification events"),bodyMessage:Object(r.__)("With custom notification levels you receive notifications for the same events as in the Participate level, with additional selected events. For more information, see %{notificationLinkStart}notification emails%{notificationLinkEnd}.")},eventNames:{change_reviewer_merge_request:Object(r.s__)("NotificationEvent|Merge request reviewers are changed"),close_issue:Object(r.s__)("NotificationEvent|Issue is closed"),close_merge_request:Object(r.s__)("NotificationEvent|Merge request is closed"),failed_pipeline:Object(r.s__)("NotificationEvent|Pipeline fails"),fixed_pipeline:Object(r.s__)("NotificationEvent|Pipeline is fixed"),issue_due:Object(r.s__)("NotificationEvent|Issue is due tomorrow"),merge_merge_request:Object(r.s__)("NotificationEvent|Merge request is merged"),moved_project:Object(r.s__)("NotificationEvent|Project is moved"),new_epic:Object(r.s__)("NotificationEvent|Epic is created"),new_issue:Object(r.s__)("NotificationEvent|Issue is created"),new_merge_request:Object(r.s__)("NotificationEvent|Merge request is created"),new_note:Object(r.s__)("NotificationEvent|Comment is added"),new_release:Object(r.s__)("NotificationEvent|Release is created"),push_to_merge_request:Object(r.s__)("NotificationEvent|Merge request receives a push"),reassign_issue:Object(r.s__)("NotificationEvent|Issue is reassigned"),reassign_merge_request:Object(r.s__)("NotificationEvent|Merge request is reassigned"),reopen_issue:Object(r.s__)("NotificationEvent|Issue is reopened"),reopen_merge_request:Object(r.s__)("NotificationEvent|Merge request is reopened"),success_pipeline:Object(r.s__)("NotificationEvent|Pipeline is successful"),approver:Object(r.s__)("NotificationEvent|You are added as an approver on a merge request")}};var d=i("TKCn"),u=i.n(d),p=i("1cpz"),f=i("30su"),g=i("MV2A"),h=i("FkSe"),v=i("l5WF"),_=i("SeSR"),m={name:"CustomNotificationsModal",components:{GlModal:p.a,GlSprintf:f.a,GlLink:g.a,GlLoadingIcon:h.a,GlFormGroup:v.a,GlFormCheckbox:_.a},inject:{projectId:{default:null},groupId:{default:null},helpPagePath:{default:""}},model:{prop:"visible",event:"change"},props:{modalId:{type:String,required:!1,default:"custom-notifications-modal"},visible:{type:Boolean,required:!1,default:!1}},data:()=>({isLoading:!1,events:[]}),methods:{open(){this.$refs.modal.show()},buildEvents(t){var e=this;const i=Object.keys(t).map((function(i){return{id:i,enabled:Boolean(t[i]),name:e.$options.i18n.eventNames[i]||"",loading:!1}}));return u()(i,"name")},async onOpen(){this.events.length||await this.loadNotificationSettings()},async loadNotificationSettings(){this.isLoading=!0;try{const{data:{events:t}}=await l.b.getNotificationSettings(this.projectId,this.groupId);this.events=this.buildEvents(t)}catch(t){this.$toast.show(this.$options.i18n.loadNotificationLevelErrorMessage)}finally{this.isLoading=!1}},async updateEvent(t,e){const i=this.events.findIndex((function(t){return t.id===e.id}));this.events.splice(i,1,{...this.events[i],loading:!0});try{const{data:{events:i}}=await l.b.updateNotificationSettings(this.projectId,this.groupId,{[e.id]:t});this.events=this.buildEvents(i)}catch(t){this.$toast.show(this.$options.i18n.updateNotificationLevelErrorMessage)}}},i18n:c},b=i("tBpV"),w=Object(b.a)(m,(function(){var t=this,e=t._self._c;return e("gl-modal",t._g({ref:"modal",attrs:{visible:t.visible,"modal-id":t.modalId,title:t.$options.i18n.customNotificationsModal.title},on:{show:t.onOpen}},t.$listeners),[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4"},[e("h4",{staticClass:"gl-mt-0",attrs:{"data-testid":"modalBodyTitle"}},[t._v("\n          "+t._s(t.$options.i18n.customNotificationsModal.bodyTitle)+"\n        ")]),t._v(" "),e("gl-sprintf",{attrs:{message:t.$options.i18n.customNotificationsModal.bodyMessage},scopedSlots:t._u([{key:"notificationLink",fn:function({content:i}){return[e("gl-link",{attrs:{href:t.helpPagePath,target:"_blank"}},[t._v(t._s(i))])]}}])})],1),t._v(" "),e("div",{staticClass:"col-lg-8"},[t.isLoading?e("gl-loading-icon",{staticClass:"gl-mt-3",attrs:{size:"lg"}}):t._l(t.events,(function(i){return e("gl-form-group",{key:i.id},[e("gl-form-checkbox",{attrs:{"data-testid":"notification-setting-"+i.id},on:{change:function(e){return t.updateEvent(e,i)}},model:{value:i.enabled,callback:function(e){t.$set(i,"enabled",e)},expression:"event.enabled"}},[e("strong",[t._v(t._s(i.name))]),i.loading?e("gl-loading-icon",{staticClass:"gl-ml-2",attrs:{size:"sm",inline:!0}}):t._e()],1)],1)}))],2)])])])}),[],!1,null,null,null).exports,j={name:"NotificationsDropdown",components:{GlCollapsibleListbox:o.a,GlButtonGroup:s.a,GlButton:n.a,CustomNotificationsModal:w},directives:{GlTooltip:a.a},inject:{containerClass:{default:""},emailsDisabled:{default:!1},dropdownItems:{default:[]},buttonSize:{default:"medium"},initialNotificationLevel:{default:""},projectId:{default:null},groupId:{default:null},showLabel:{default:!1}},data(){return{selectedNotificationLevel:this.initialNotificationLevel,isLoading:!1,notificationsModalVisible:!1}},computed:{notificationLevels(){var t=this;return[{text:"",options:this.dropdownItems.map((function(e){return{value:e,text:t.$options.i18n.notificationTitles[e]||"",secondaryText:t.$options.i18n.notificationDescriptions[e]||""}}))},{text:this.$options.i18n.notificationTitles.custom,textSrOnly:!0,options:[{value:this.$options.customLevel,text:this.$options.i18n.notificationTitles.custom,secondaryText:this.$options.i18n.notificationDescriptions.custom}]}]},isCustomNotification(){return"custom"===this.selectedNotificationLevel},buttonIcon(){return this.isLoading?"":"disabled"===this.selectedNotificationLevel?"notifications-off":"notifications"},buttonText(){const t=this.$options.i18n.notificationTitles[this.selectedNotificationLevel]||this.selectedNotificationLevel;return this.showLabel?t:this.emailsDisabled?this.$options.i18n.notificationDescriptions.owner_disabled:Object(r.sprintf)(this.$options.i18n.notificationTooltipTitle,{notification_title:t})},ariaLabel(){return Object(r.sprintf)(this.$options.i18n.notificationTooltipTitle,{notification_title:this.$options.i18n.notificationTitles[this.selectedNotificationLevel]})}},methods:{openNotificationsModal(){this.isCustomNotification&&(this.notificationsModalVisible=!0)},selectItem(t){t!==this.selectedNotificationLevel&&this.updateNotificationLevel(t)},async updateNotificationLevel(t){this.isLoading=!0;try{await l.b.updateNotificationSettings(this.projectId,this.groupId,{level:t}),this.selectedNotificationLevel=t,this.openNotificationsModal()}catch(t){this.$toast.show(this.$options.i18n.updateNotificationLevelErrorMessage)}finally{this.isLoading=!1}}},customLevel:"custom",i18n:c,modalId:"custom-notifications-modal"},N=Object(b.a)(j,(function(){var t=this,e=t._self._c;return e("div",{class:t.containerClass},[e("gl-button-group",[t.isCustomNotification?e("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{title:t.buttonText},expression:"{ title: buttonText }"}],attrs:{"data-testid":"notification-split-icon",category:"primary",variant:"default","aria-label":t.__("Notification setting - Custom"),size:t.buttonSize,icon:t.buttonIcon},on:{click:t.openNotificationsModal}}):t._e(),t._v(" "),e("gl-collapsible-listbox",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{title:t.buttonText},expression:"{ title: buttonText }"}],attrs:{"data-testid":"notification-dropdown",size:t.buttonSize,icon:t.isCustomNotification?"":t.buttonIcon,items:t.notificationLevels,"toggle-text":t.buttonText,loading:t.isLoading,disabled:t.emailsDisabled,"aria-label":t.ariaLabel,selected:t.selectedNotificationLevel,"text-sr-only":!t.showLabel||t.isCustomNotification},on:{select:t.selectItem},scopedSlots:t._u([{key:"list-item",fn:function({item:i}){return[e("div",{staticClass:"gl-flex gl-flex-col"},[e("span",{staticClass:"gl-font-bold"},[t._v(t._s(i.text))]),t._v(" "),e("span",{staticClass:"gl-text-sm gl-text-subtle"},[t._v(t._s(i.secondaryText))])])]}}])})],1),t._v(" "),e("custom-notifications-modal",{attrs:{"modal-id":t.$options.modalId},model:{value:t.notificationsModalVisible,callback:function(e){t.notificationsModalVisible=e},expression:"notificationsModalVisible"}})],1)}),[],!1,null,null,null);e.a=N.exports},sijA:function(t,e,i){"use strict";var o=i("4lAS"),s=i("XiQx"),n=i("fSQg"),a=i("Bo17"),l=i("s1D3"),r=i("lHJB"),c=i("/lV4"),d=i("AxUD"),u={components:{GlButton:o.a,GlDisclosureDropdownItem:s.b,GlDisclosureDropdownGroup:n.a,GlDisclosureDropdown:a.a,GlIcon:l.a},directives:{GlTooltip:r.a},inject:["isGroup","groupOrProjectId","leavePath","leaveConfirmMessage","withdrawPath","withdrawConfirmMessage","requestAccessPath","canEdit","editPath"],data:()=>({isDropdownVisible:!1}),computed:{namespaceType(){return this.isGroup?d.WORKSPACE_GROUP:d.WORKSPACE_PROJECT},hasPath(){return this.leavePath||this.withdrawPath||this.requestAccessPath},settingsTitle(){return this.isGroup?this.$options.i18n.groupSettings:this.$options.i18n.projectSettings},leaveTitle(){return this.isGroup?this.$options.i18n.groupLeaveTitle:this.$options.i18n.projectLeaveTitle},copyTitle(){return this.isGroup?this.$options.i18n.groupCopyTitle:this.$options.i18n.projectCopyTitle},copiedToClipboard(){return this.isGroup?this.$options.i18n.groupCopiedToClipboard:this.$options.i18n.projectCopiedToClipboard},leaveItem(){return{text:this.leaveTitle,href:this.leavePath,variant:"danger",extraAttrs:{"aria-label":this.leaveTitle,"data-method":"delete","data-confirm":this.leaveConfirmMessage,"data-confirm-btn-variant":"danger","data-testid":`leave-${this.namespaceType}-link`,rel:"nofollow",class:"js-leave-link"}}},withdrawItem(){return{text:this.$options.i18n.withdrawAccessTitle,href:this.withdrawPath,extraAttrs:{"data-method":"delete","data-confirm":this.withdrawConfirmMessage,"data-testid":"withdraw-access-link",rel:"nofollow"}}},requestAccessItem(){return{text:this.$options.i18n.requestAccessTitle,href:this.requestAccessPath,extraAttrs:{"data-method":"post","data-testid":"request-access-link",rel:"nofollow"}}},copyIdItem(){var t=this;return{text:Object(c.sprintf)(this.copyTitle,{id:this.groupOrProjectId}),action:function(){t.$toast.show(t.copiedToClipboard)},extraAttrs:{"data-testid":`copy-${this.namespaceType}-id`}}},settingsItem(){return{text:this.settingsTitle,href:this.editPath,extraAttrs:{"data-testid":`settings-${this.namespaceType}-link`}}},showDropdownTooltip(){return this.isDropdownVisible?"":this.$options.i18n.actionsLabel}},methods:{showDropdown(){this.isDropdownVisible=!0},hideDropdown(){this.isDropdownVisible=!1}},i18n:{actionsLabel:Object(c.__)("More actions"),groupCopiedToClipboard:Object(c.s__)("GroupPage|Group ID copied to clipboard."),projectCopiedToClipboard:Object(c.s__)("ProjectPage|Project ID copied to clipboard."),groupLeaveTitle:Object(c.__)("Leave group"),projectLeaveTitle:Object(c.__)("Leave project"),withdrawAccessTitle:Object(c.__)("Withdraw Access Request"),requestAccessTitle:Object(c.__)("Request Access"),groupCopyTitle:Object(c.s__)("GroupPage|Copy group ID: %{id}"),projectCopyTitle:Object(c.s__)("ProjectPage|Copy project ID: %{id}"),projectSettings:Object(c.s__)("ProjectPage|Project settings"),groupSettings:Object(c.s__)("GroupPage|Group settings")}},p=i("tBpV"),f=Object(p.a)(u,(function(){var t=this,e=t._self._c;return e("gl-disclosure-dropdown",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:t.showDropdownTooltip,expression:"showDropdownTooltip"}],staticClass:"gl-relative gl-w-full sm:gl-w-auto",attrs:{category:"tertiary",icon:"ellipsis_v","no-caret":"","toggle-text":t.$options.i18n.actionsLabel,"text-sr-only":"","data-testid":"groups-projects-more-actions-dropdown"},on:{shown:t.showDropdown,hidden:t.hideDropdown},scopedSlots:t._u([{key:"toggle",fn:function(){return[e("div",{staticClass:"gl-min-h-7"},[e("gl-button",{staticClass:"gl-new-dropdown-toggle gl-absolute gl-left-0 gl-top-0 gl-w-full sm:gl-w-auto md:!gl-hidden",attrs:{"button-text-classes":"gl-w-full",category:"secondary","aria-label":t.$options.i18n.actionsLabel,title:t.$options.i18n.actionsLabel}},[e("span",{staticClass:"gl-new-dropdown-button-text"},[t._v(t._s(t.$options.i18n.actionsLabel))]),t._v(" "),e("gl-icon",{staticClass:"dropdown-chevron",attrs:{name:"chevron-down"}})],1),t._v(" "),e("gl-button",{ref:"moreActionsDropdown",staticClass:"gl-new-dropdown-toggle gl-new-dropdown-icon-only gl-new-dropdown-toggle-no-caret gl-hidden md:!gl-flex",attrs:{category:"tertiary",icon:"ellipsis_v","aria-label":t.$options.i18n.actionsLabel,title:t.$options.i18n.actionsLabel}})],1)]},proxy:!0}])},[t._v(" "),t.groupOrProjectId?e("gl-disclosure-dropdown-item",{attrs:{item:t.copyIdItem,"data-clipboard-text":t.groupOrProjectId}}):t._e(),t._v(" "),t.canEdit?e("gl-disclosure-dropdown-item",{attrs:{item:t.settingsItem}}):t._e(),t._v(" "),t.hasPath?e("gl-disclosure-dropdown-group",{attrs:{bordered:""}},[t.leavePath?e("gl-disclosure-dropdown-item",{ref:"leaveItem",attrs:{item:t.leaveItem}}):t.withdrawPath?e("gl-disclosure-dropdown-item",{attrs:{item:t.withdrawItem}}):t.requestAccessPath?e("gl-disclosure-dropdown-item",{attrs:{item:t.requestAccessItem}}):t._e()],1):t._e()],1)}),[],!1,null,null,null);e.a=f.exports},uHqx:function(t,e){t.exports=function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}}}]);
//# sourceMappingURL=commons-pages.groups.show-pages.projects.home_panel-pages.projects.show.14b767ad.chunk.js.map